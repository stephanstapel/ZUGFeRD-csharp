<?xml version="1.0" encoding="UTF-8"?>
<ubl:Invoice xmlns:ubl="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
             xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
             xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2">
    <?xmute mutator="identity" id="correct-customization-id" schematron-valid="xrubl:BR-DE-21" description="Correct customization ids"?>
    <cbc:CustomizationID>urn:cen.eu:en16931:2017#compliant#urn:xeinkauf.de:kosit:xrechnung_3.0#conformant#urn:xeinkauf.de:kosit:extension:xrechnung_3.0</cbc:CustomizationID>
    <cbc:ProfileID>urn:fdc:peppol.eu:2017:poacc:billing:01:1.0</cbc:ProfileID>
    <cbc:ID>12345</cbc:ID>
    <cbc:IssueDate>2019-05-15</cbc:IssueDate>
    <cbc:InvoiceTypeCode>380</cbc:InvoiceTypeCode>
    <cbc:DocumentCurrencyCode>EUR</cbc:DocumentCurrencyCode>
    <cbc:BuyerReference>12345678-12345-12</cbc:BuyerReference>
    <cac:InvoicePeriod>
        <cbc:StartDate>2019-02-01</cbc:StartDate>
        <cbc:EndDate>2019-05-07</cbc:EndDate>
    </cac:InvoicePeriod>
    <cac:OrderReference>
        <cbc:ID>123</cbc:ID>
    </cac:OrderReference>
    <cac:AccountingSupplierParty>
        <cac:Party>
            <cbc:EndpointID schemeID="EM">seller@seller.com</cbc:EndpointID>
            <cac:PartyName>
                <cbc:Name>M. Meier Handwerk GbR</cbc:Name>
            </cac:PartyName>
            <cac:PostalAddress>
                <cbc:StreetName>Hauptstraße 2</cbc:StreetName>
                <cbc:CityName>Musterstadt</cbc:CityName>
                <cbc:PostalZone>12345</cbc:PostalZone>
                <cac:Country>
                    <cbc:IdentificationCode>DE</cbc:IdentificationCode>
                </cac:Country>
            </cac:PostalAddress>
            <cac:PartyTaxScheme>
                <cbc:CompanyID>DE/12/345/67890</cbc:CompanyID>
                <cac:TaxScheme>
                    <cbc:ID>VAT</cbc:ID>
                </cac:TaxScheme>
            </cac:PartyTaxScheme>
            <cac:PartyLegalEntity>
                <cbc:RegistrationName>M. Meier Handwerk GbR</cbc:RegistrationName>
                <cbc:CompanyID>1122334455</cbc:CompanyID>
            </cac:PartyLegalEntity>
            <cac:Contact>
                <cbc:Name>M. Meier Handwerk GbR</cbc:Name>
                <cbc:Telephone>010/12345</cbc:Telephone>
                <cbc:ElectronicMail>info@m-meier.de</cbc:ElectronicMail>
            </cac:Contact>
        </cac:Party>
    </cac:AccountingSupplierParty>
    <cac:AccountingCustomerParty>
        <cac:Party>
            <cbc:EndpointID schemeID="EM">buyer@buyer.com</cbc:EndpointID>
            <cac:PartyIdentification>
                <cbc:ID>345LA5324</cbc:ID>
            </cac:PartyIdentification>
            <cac:PostalAddress>
                <cbc:StreetName>Dorfplatz 3</cbc:StreetName>
                <cbc:CityName>Musterort</cbc:CityName>
                <cbc:PostalZone>54321</cbc:PostalZone>
                <cac:Country>
                    <cbc:IdentificationCode>DE</cbc:IdentificationCode>
                </cac:Country>
            </cac:PostalAddress>
            <cac:PartyLegalEntity>
                <cbc:RegistrationName>Beispielkunde</cbc:RegistrationName>
            </cac:PartyLegalEntity>
        </cac:Party>
    </cac:AccountingCustomerParty>
    <cac:PaymentMeans>
        <cbc:PaymentMeansCode>31</cbc:PaymentMeansCode>
        <cac:PayeeFinancialAccount>
            <cbc:ID>DE091111222233334444</cbc:ID>
        </cac:PayeeFinancialAccount>
    </cac:PaymentMeans>
    <cac:PaymentTerms>
        <cbc:Note>Zahlbar innerhalb 14 Tagen nach Erhalt der Rechnung.</cbc:Note>
    </cac:PaymentTerms>
    <cac:TaxTotal>
        <cbc:TaxAmount currencyID="EUR">2382</cbc:TaxAmount>
        <cac:TaxSubtotal>
            <cbc:TaxableAmount currencyID="EUR">12536.84</cbc:TaxableAmount>
            <cbc:TaxAmount currencyID="EUR">2382</cbc:TaxAmount>
            <cac:TaxCategory>
                <cbc:ID>S</cbc:ID>
                <cbc:Percent>19</cbc:Percent>
                <cac:TaxScheme>
                    <cbc:ID>VAT</cbc:ID>
                </cac:TaxScheme>
            </cac:TaxCategory>
        </cac:TaxSubtotal>
    </cac:TaxTotal>
    <cac:LegalMonetaryTotal>
        <cbc:LineExtensionAmount currencyID="EUR">12536.84</cbc:LineExtensionAmount>
        <cbc:TaxExclusiveAmount currencyID="EUR">12536.84</cbc:TaxExclusiveAmount>
        <cbc:TaxInclusiveAmount currencyID="EUR">14918.84</cbc:TaxInclusiveAmount>
        <cbc:PrepaidAmount currencyID="EUR">10000.0</cbc:PrepaidAmount>
        <cbc:PayableAmount currencyID="EUR">4918.84</cbc:PayableAmount>
    </cac:LegalMonetaryTotal>
    <cac:InvoiceLine>
        <cbc:ID>1</cbc:ID>
        <cbc:InvoicedQuantity unitCode="XPP">100</cbc:InvoicedQuantity>
        <cbc:LineExtensionAmount currencyID="EUR">100.0</cbc:LineExtensionAmount>
        <cac:Item>
            <cbc:Name>Sanitär und Zubehör</cbc:Name>
            <cac:ClassifiedTaxCategory>
                <cbc:ID>S</cbc:ID>
                <cbc:Percent>19</cbc:Percent>
                <cac:TaxScheme>
                    <cbc:ID>VAT</cbc:ID>
                </cac:TaxScheme>
            </cac:ClassifiedTaxCategory>
        </cac:Item>
        <cac:Price>
            <cbc:PriceAmount currencyID="EUR">1</cbc:PriceAmount>
        </cac:Price>
        <cac:SubInvoiceLine>
            <cbc:ID>1 1</cbc:ID>
            <cbc:LineExtensionAmount currencyID="EUR">100.0</cbc:LineExtensionAmount>
            <cac:Item>
                <cbc:Name>Demontage Sanitär</cbc:Name>
                <?xmute mutator="identity" schematron-invalid="xrubl:BR-DEX-03" id="br-dex-03-invalid-test-multiple-bg-dex-06-1" description="Sub invoice lines shall have one and only one classified tax category."?>               
                <cac:ClassifiedTaxCategory>
                    <cbc:ID>S</cbc:ID>
                    <cbc:Percent>7</cbc:Percent>
                    <cac:TaxScheme>
                        <cbc:ID>VAT</cbc:ID>
                    </cac:TaxScheme>
                </cac:ClassifiedTaxCategory>
                <cac:ClassifiedTaxCategory>
                    <cbc:ID>S</cbc:ID>
                    <cbc:Percent>7</cbc:Percent>
                    <cac:TaxScheme>
                        <cbc:ID>VAT</cbc:ID>
                    </cac:TaxScheme>
                </cac:ClassifiedTaxCategory>
            </cac:Item>
            <cac:SubInvoiceLine>
                <cbc:ID>1 1 1</cbc:ID>
                <cbc:InvoicedQuantity unitCode="MTR">149</cbc:InvoicedQuantity>       
                <cbc:LineExtensionAmount currencyID="EUR">100.0</cbc:LineExtensionAmount>
                <cac:Item>
                    <cbc:Name>Demontage TW-Rohrleitung DN 12-25</cbc:Name>
                    <?xmute mutator="identity" schematron-invalid="xrubl:BR-DEX-03" id="br-dex-03-invalid-test-multiple-bg-dex-06-2" description="Sub invoice lines shall have one and only one classified tax category."?>                   
                    <cac:ClassifiedTaxCategory>
                        <cbc:ID>S</cbc:ID>
                        <cbc:Percent>7</cbc:Percent>
                        <cac:TaxScheme>
                            <cbc:ID>VAT</cbc:ID>
                        </cac:TaxScheme>
                    </cac:ClassifiedTaxCategory>                   
                    <cac:ClassifiedTaxCategory>
                        <cbc:ID>S</cbc:ID>
                        <cbc:Percent>7</cbc:Percent>
                        <cac:TaxScheme>
                            <cbc:ID>VAT</cbc:ID>
                        </cac:TaxScheme>
                    </cac:ClassifiedTaxCategory>
                </cac:Item>
                <cac:Price>
                    <cbc:PriceAmount currencyID="EUR">1.30</cbc:PriceAmount>
                    <cbc:BaseQuantity unitCode="MTR">1</cbc:BaseQuantity>
                </cac:Price>
                <cac:SubInvoiceLine>
                    <cbc:ID>1 1 1 1</cbc:ID>
                    <cbc:InvoicedQuantity unitCode="MTR">149</cbc:InvoicedQuantity>       
                    <cbc:LineExtensionAmount currencyID="EUR">100.0</cbc:LineExtensionAmount>
                    <cac:Item>
                        <cbc:Name>Demontage TW-Rohrleitung DN 12-25</cbc:Name>
                        <!--This is the active mutation configuration: ubl-inv-br-dex-03-invalid-test-229-identity -->
                  <?xmute mutator="identity" schematron-invalid="xrubl:BR-DEX-03" id="br-dex-03-invalid-test-multiple-bg-dex-06-3" description="Sub invoice lines shall have one and only one classified tax category."?>                       
                        <cac:ClassifiedTaxCategory>
                            <cbc:ID>S</cbc:ID>
                            <cbc:Percent>7</cbc:Percent>
                            <cac:TaxScheme>
                                <cbc:ID>VAT</cbc:ID>
                            </cac:TaxScheme>
                        </cac:ClassifiedTaxCategory>                   
                        <cac:ClassifiedTaxCategory>
                            <cbc:ID>S</cbc:ID>
                            <cbc:Percent>7</cbc:Percent>
                            <cac:TaxScheme>
                                <cbc:ID>VAT</cbc:ID>
                            </cac:TaxScheme>
                        </cac:ClassifiedTaxCategory>
                    </cac:Item>
                    <cac:Price>
                        <cbc:PriceAmount currencyID="EUR">1.30</cbc:PriceAmount>
                        <cbc:BaseQuantity unitCode="MTR">1</cbc:BaseQuantity>
                    </cac:Price>
                </cac:SubInvoiceLine>
            </cac:SubInvoiceLine>
        </cac:SubInvoiceLine>        
    </cac:InvoiceLine>
</ubl:Invoice>
